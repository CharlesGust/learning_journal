{% extends "base.html" %}
{% block body %}
  {% if session.logged_in %}
  <aside>
  <form action="{{ url_for('add_entry') }}" method="POST" class="add_entry">
    <div class="field">
      <label for="title">Title</label>
      <input type="text" size="30" name="title" id="title"/>
    </div>
    <div class="field">
      <label for="text">Text</label>
      <textarea name="text" id="text" rows="5" cols="80"></textarea>
    </div>
    <div>
    <input type="submit" value="Share" name="Share"/>
    </div>
  </form>
  </aside>
  {% endif %}
  <h2>Entries</h2>
  {% for entry in entries %}
  <article class="entry" id="entry={{entry.id}}">
    <h3>{{ entry.title }}</h3>
    <p class="dateline">{{ entry.created.strftime('%b. %d, %Y')}}</p>
    <div class="entry_body">
    </div>
    {% if session.logged_in %}
      <form action="{{ url_for('edit_entry') }}" method="POST" class="edit_entry">
        <input type="text" value="{{entry.title}}" size="30" name="edit_title{{entry.id}}"/>
        <textarea name='edit_text{{entry.id}}' rows="5" cols="80">{{ entry.text|safe }}</textarea>
        <input type='submit' value='Edit' name='edit'>
        <input type='hidden' value="{{entry.id}}" name='edit_id'>
      </form>
    {% else %}
      {{ entry.text|safe }}
    {% endif %}
  </article>
  {% else %}
  <div class="entry">
    <p><em>No entries here so far</em></p>
  </div>
  {% endfor %}
{% endblock %}
